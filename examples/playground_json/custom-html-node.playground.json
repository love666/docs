{"files":{"htmlNode.js":{"content":"class CustomHtmlNodeModel extends HtmlNodeModel {\n  setAttributes() {\n    this.text.editable = false; // 禁止节点文本编辑\n    // 设置节点宽高和锚点\n    const width = 200;\n    const height = 130;\n    this.width = width;\n    this.height = height;\n    this.anchorsOffset = [\n      [width / 2, 0],\n      [0, height / 2],\n      [-width / 2, 0],\n      [0, -height/2],\n    ]\n  }\n}\n\nclass CustomHtmlNode extends HtmlNode {\n  setHtml(rootEl) {\n    const { properties } = this.props.model;\n  \n    const el = document.createElement('div');\n    el.className = 'uml-wrapper';\n    const html = `\n      <div>\n        <div class=\"uml-head\">Head</div>\n        <div class=\"uml-body\">\n          <div><button onclick=\"setData()\" onmousedown=\"stop(arguments[0])\">+</button> ${properties.name}</div>\n          <div>${properties.body}</div>\n        </div>\n        <div class=\"uml-footer\">\n          <div>setHead(Head $head)</div>\n          <div>setBody(Body $body)</div>\n        </div>\n      </div>\n    `\n    el.innerHTML = html;\n    // 需要先把之前渲染的子节点清除掉。\n    rootEl.innerHTML = '';\n    rootEl.appendChild(el);\n    window.stop = (ev) => {\n      ev.stopPropagation();\n    };\n    window.setData = () => {\n      const { graphModel, model } = this.props;\n      graphModel.eventCenter.emit(\"custom:button-click\", model);\n    };\n  }\n}\n\nexport default {\n  type: 'html-node',\n  view: CustomHtmlNode,\n  model: CustomHtmlNodeModel,\n}"},"index.html":{"content":"<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <link rel=\"stylesheet\" href=\"//unpkg.com/@logicflow/core/dist/style/index.css\" />\n  <link rel=\"stylesheet\" href=\"./style.css\" />\n  <style>\n    html, body {\n      height: 100%;\n      margin: 0;\n      padding: 0;\n    }\n    #container {\n      height: calc(100% - 20px);\n      width: 100%;\n    }\n  </style>\n</head>\n<body>\n  <div id=\"container\"></div>\n  <script src=\"//unpkg.com/@logicflow/core/dist/logic-flow.js\"></script>\n  <script type=\"module\" src=\"./index.js\"></script>\n</body>\n</html>"},"index.js":{"content":"import htmlNode from \"./htmlNode.js\";\n\n// logicflow流程图配置\nconst LFConfig = {\n  edgeTextDraggable: true,\n  adjustEdgeMiddle: true,\n  hoverOutline: false,\n  nodeSelectedOutline: false,\n  hideAnchors: true,\n  background: {\n    backgroundImage:\n            \"url('https://dpubstatic.udache.com/static/dpubimg/805efa14-d908-4332-a7a2-bee8fbb903e3.jpg')\",\n    backgroundRepeat: 'repeat',\n  },\n  grid: {\n    size: 1,\n    visible: false,\n  },\n  keyboard: {\n    enabled: true,\n  },\n};\nconst container = document.querySelector('#container');\n\nconst lf = new LogicFlow({\n  ...LFConfig,\n  // 容器\n  container,\n  // 指定画布区域的宽高，默认使用容器宽高\n  width: 1000,\n  height: 1000,\n});\n\nlf.register(htmlNode);\n\nlf.on(\"custom:button-click\", (model) => {\n  lf.setProperties(model.id, {\n    body: \"LogicFlow\"\n  });\n});\n\nconst nodeData = {\n  id: \"1\",\n  type: \"html-node\",\n  x: 300,\n  y: 250,\n  properties: {\n    name: \"hello\",\n    body: \"world\"\n  }\n};\n\nconst render = (node) => {\n  lf.render({\n    nodes: [\n      node,\n    ]\n  });\n}\nrender(nodeData);"},"style.css":{"content":".uml-wrapper {\n  background: #68fce2;\n  width: 100%;\n  height: 100%;\n  border-radius: 10px;\n  border: 2px solid #838382;\n  box-sizing: border-box;\n}\n.uml-head {\n  text-align: center;\n  line-height: 30px;\n  font-size: 16px;\n  font-weight: bold;\n}\n.uml-body {\n  border-top: 1px solid #838382;\n  border-bottom: 1px solid #838382;\n  padding: 5px 10px;\n  font-size: 12px;\n}\n.uml-footer {\n  padding: 5px 10px;\n  font-size: 14px;\n}\n"}}}