# Adapter

## LogicFlow's data format

In LogicFlow, a flowchart is composed of **nodes** and **edges**.

- For a node, we need to know the **id**, [type](en/guide/extension/adapter#type), **coordinates**, **text**, [properties](en/guide/extension/adapter#properties) of this node.
- For an edge, we then need to know the **id**, [type](en/guide/extension/adapter#type), the starting node id (**sourceNodeId**), the target node id (**targetNodeId**), **text**, [properties]( en/guide/extension/adapter#properties) and the starting position of the edge (**startPoint**), and the ending position of the edge (**endPoint**).

  - The polyline has the additional property `pointsList`. Since the polyline can be manually adjusted by the user, this field is added to record the exact path of this polyline.

### type

In LogicFlow, information indicating the appearance of a node such as width, height, and color are not saved to the data, but are uniformly represented using the type of this node. For example, if we customize a node as "startNode", then the current project should know what the node of type startNode will look like.

### properties

properties is an empty object set aside by LogicFlow for the developer to bind any data based on this property. As mentioned in the type above, the specific appearance of a node is determined by the type. But when we need to make some adjustments to the appearance of this node based on some business conditions in the project, we can put those business conditions into properties. Then when we customize the node, we get the properties through the `this.props.model` method and finally reset the node's style based on the contents of the proerties.

### How to use

```js
lf.render({
  nodes: [
    {
      id: "1",
      type: "rect",
      x: 100,
      y: 100,
    },
    {
      id: "2",
      type: "circle",
      x: 300,
      y: 200,
    },
  ],
  edges: [
    {
      id: "edge1",
      type: "polyline",
      sourceNodeId: "1",
      targetNodeId: "2",
      startPoint: { x: 150, y: 100 },
      endPoint: { x: 250, y: 200 },
      pointList: [
        { x: 150, y: 100 },
        { x: 200, y: 100 },
        { x: 200, y: 200 },
        { x: 250, y: 200 },
      ],
    },
  ],
});
```

## What is a data adapter tool

In some cases, the format of the data generated by LogicFlow may not meet the format required by the business. For example, if the backend needs data in the format generated by bpmn-js, you can use the data adapter tool to convert the data generated by LogicFlow to the data generated by bpmn-js.

## How to customize the data adapter tool

The custom data adapter tool essentially takes the user's incoming data and converts it to a format that LogicFlow recognizes via an `lf.adapterIn` method. Then when it generates the data, it converts the LogicFlow data to the user's incoming data via the `lf.adapterOut` method. So to customize the data adapter tool we just need to override these two methods again.

```js
const lf = new LogicFlow({
  container: document.querySelector("#app"),
});
lf.adapterIn = function (userData) {
  // Here, userData is converted to a format supported by LogicFlow
  return logicFlowData;
};
lf.adapterOut = function (logicFlowData) {
  // Here the data generated by LogicFlow is converted to the format required by the user.
  return userData;
};
```

## Using the built-in data conversion tool

LogicFlow has a built-in universal bpmn-js conversion tool. It supports displaying diagrams drawn on LogicFlow on bpmn-js and vice versa. [LogicFlow2Bpmn](https://github.com/didi/LogicFlow/tree/master/packages/extension/src/bpmn-adapter)

### bpmnAdapter

```ts
import LogicFlow from "@logicflow/core";
import { BpmnAdapter } from "@logicflow/extension";

// Register plugin
LogicFlow.use(BpmnAdapter);

// Instantiating LogicFlow
const lf = new LogicFlow();
lf.render();

// Get the transformed data by gettingGraphData
lf.getGraphData();
```

### Example

<iframe src="https://docs.logic-flow.cn/demo/dist/examples/#/extension/adapter?from=doc"
  style="width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;"
></iframe>